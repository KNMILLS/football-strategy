import{resolveLongGain as h,rollD6 as p}from"./LongGain-B92lIB4o.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const F="modulepreload",j=function(t){return"/"+t},L={},y=function(n,r,e){let s=Promise.resolve();if(r&&r.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=c(r.map(l=>{if(l=j(l),l in L)return;L[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":F,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((E,C)=>{d.addEventListener("load",E),d.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return n().catch(o)})},_={2:"FUMBLE*",3:"PENALTY -10*",4:10,5:15,6:20,7:25,8:30,9:35,10:40,11:"LG",12:"LG + 5"},P={1:{possession:"kicker",yard:40},2:{possession:"kicker",yard:40},3:{possession:"receiver",yard:35},4:{possession:"receiver",yard:35},5:{possession:"receiver",yard:35},6:{possession:"receiver",yard:30}};function O(t,n){return typeof t=="number"?{yardLine:t,turnover:!1}:t==="LG"?{yardLine:Math.min(h(n),50),turnover:!1}:t==="LG + 5"?{yardLine:Math.min(h(n)+5,50),turnover:!1}:{yardLine:25,turnover:!1}}function K(t,n){if(n.onside){let c=p(t);n.kickerLeadingOrTied&&(c=Math.min(6,c+1));const l=P[c]||{possession:"receiver",yard:35};return{yardLine:l.yard,turnover:l.possession==="kicker"}}let r=p(t)+p(t),e=_[r],s=!1,o=!1;if(typeof e=="string"&&e.includes("*")){/FUMBLE/i.test(e)&&(s=!0),/PENALTY/i.test(e)&&(o=!0),e=e.replace("*","").trim();const c=p(t)+p(t);let l=_[c];typeof l=="string"&&l.includes("*")&&(/FUMBLE/i.test(l)&&(s=!1),/PENALTY/i.test(l)&&(o=!1),l=l.replace("*","").trim()),e=l}const i=O(e,t);let a=i.yardLine;return o&&(a=Math.max(0,i.yardLine-10)),{yardLine:a,turnover:s}}const U=Object.freeze(Object.defineProperty({__proto__:null,NORMAL_KICKOFF_TABLE:_,ONSIDE_KICK_TABLE:P,parseKickoffYardLine:O,resolveKickoff:K},Symbol.toStringTag,{value:"Module"})),v={2:30,3:35,4:38,5:40,6:42,7:43,8:44,9:46,10:48,11:50,12:52},T={2:{type:"LG"},3:{yards:20},4:{yards:15},5:{yards:12},6:{yards:10},7:{yards:8},8:{yards:6},9:{yards:5},10:{yards:3},11:{yards:0},12:{type:"FC"}};function m(t){return Math.floor(t()*6)+1}function I(t,n,r){const e=t.puntingTeam==="player",s=m(n)+m(n),o=v[s]??40;let i=t.ballOn+(e?o:-o);if(i>100||i<0)return i=!e?20:80,{ballOn:i,possessionFlips:!0,fumbleRecoveredByKickingTeam:!1,touchback:!0};if(i===100||i===0)return i=!e?20:80,{ballOn:i,possessionFlips:!0,fumbleRecoveredByKickingTeam:!1,touchback:!0};const a=m(n)+m(n),c=T[a]||{yards:0};let l=0,u=!1;return c.type==="FC"?l=0:c.type==="LG"?l=r(n):(l=c.yards||0,a<=4&&n()<.15&&(u=n()<.5)),e?i-=l:i+=l,i=Math.max(0,Math.min(100,i)),u?{ballOn:i,possessionFlips:!1,fumbleRecoveredByKickingTeam:!0,touchback:!1}:{ballOn:i,possessionFlips:!0,fumbleRecoveredByKickingTeam:!1,touchback:!1}}const z=Object.freeze(Object.defineProperty({__proto__:null,PUNT_DISTANCE_TABLE:v,PUNT_RETURN_TABLE:T,resolvePunt:I,rollD6:m},Symbol.toStringTag,{value:"Module"})),G={2:{PAT:"NG","1-12":"NG","13-22":"NG","23-32":"G","33-38":"G","39-45":"G"},3:{PAT:"G","1-12":"NG","13-22":"NG","23-32":"NG","33-38":"G","39-45":"NG"},4:{PAT:"G","1-12":"G","13-22":"NG","23-32":"NG","33-38":"NG","39-45":"NG"},5:{PAT:"G","1-12":"G","13-22":"G","23-32":"NG","33-38":"NG","39-45":"NG"},6:{PAT:"G","1-12":"G","13-22":"G","23-32":"G","33-38":"NG","39-45":"NG"},7:{PAT:"G","1-12":"G","13-22":"G","23-32":"G","33-38":"G","39-45":"NG"},8:{PAT:"G","1-12":"G","13-22":"G","23-32":"G","33-38":"NG","39-45":"NG"},9:{PAT:"G","1-12":"G","13-22":"G","23-32":"NG","33-38":"NG","39-45":"NG"},10:{PAT:"G","1-12":"G","13-22":"G","23-32":"NG","33-38":"NG","39-45":"NG"},11:{PAT:"G","1-12":"G","13-22":"NG","23-32":"NG","33-38":"G","39-45":"NG"},12:{PAT:"NG","1-12":"NG","13-22":"G","23-32":"G","33-38":"G","39-45":"G"}};function g(t){return Math.floor(t()*6)+1}function Y(t){const n=g(t)+g(t);return(G[n]||{}).PAT==="G"}function x(t,n){const r=Math.round(n);let e=null;if(r<=12?e="1-12":r<=22?e="13-22":r<=32?e="23-32":r<=38?e="33-38":r<=45?e="39-45":e=null,!e)return!1;const s=g(t)+g(t);return(G[s]||{})[e]==="G"}const H=Object.freeze(Object.defineProperty({__proto__:null,PLACE_KICK_TABLE:G,attemptFieldGoal:x,attemptPAT:Y,rollD6:g},Symbol.toStringTag,{value:"Module"})),b={gain0to20:30,gain20plus:45,loss:30,outOfBounds:15,incomplete:15,interception:30,penalty:15,fumble:15,kickoff:15,fieldgoal:15,punt:15,extraPoint:0};function w(t,n,r){const e={yards:0,penalty:null,turnover:!1,interceptReturn:0,firstDown:!1};if(!t)return e;const s=t.trim();if(e.raw=s,e.outOfBounds=/O\/?B/i.test(s),/Incomplete/i.test(s))return e.category="incomplete",e;if(/FUMBLE/i.test(s))return e.turnover=!0,e.category="fumble",e;if(/INTERCEPT/i.test(s)){e.turnover=!0,e.category="interception";const a=s.match(/[+-]?\d+/);return a&&(e.interceptReturn=parseInt(a[0],10)),e}if(/PENALTY/i.test(s)){const a=s.match(/[+-]\d+/),c=a?parseInt(a[0],10):0,l=c>0;return e.penalty={on:l?"defense":"offense",yards:Math.abs(c),firstDown:/1st\s*Down/i.test(s)},e.category="penalty",e}if(/Sack/i.test(s)){const a=s.match(/-\d+/);return a&&(e.yards=parseInt(a[0],10)),e.category="loss",e}if(/LG/.test(s))return e.yards=n(r),e.category="gain",e;const o=s.match(/[+-]?\d+/);if(o)return e.yards=parseInt(o[0],10),e.category=e.yards<0?"loss":"gain",e;const i=s.match(/Complete\s*[+-]\d+/i);if(i){const a=i[0].match(/[+-]\d+/);return a&&(e.yards=parseInt(a[0],10)),e.category=e.yards<0?"loss":"gain",e}return e.category="other",e}function A(t,n=b){if(!t)return n.gain0to20;if(t.outOfBounds)return n.outOfBounds;switch(t.category){case"incomplete":return n.incomplete;case"interception":return n.interception;case"fumble":return n.fumble;case"penalty":return n.penalty;case"loss":return n.loss;case"gain":return Math.abs(t.yards)>20?n.gain20plus:n.gain0to20;default:return n.gain0to20}}const V=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_TIME_KEEPING:b,calculateTimeOff:A,parseResultString:w},Symbol.toStringTag,{value:"Module"}));function N(t,n,r){let e=A(t,b);if(n){const s=t.category==="incomplete",o=!!t.outOfBounds;(s||o||r)&&(e=0)}return e}const $=Object.freeze(Object.defineProperty({__proto__:null,timeOffWithTwoMinute:N},Symbol.toStringTag,{value:"Module"})),M={1:"A",2:"B",3:"C",4:"D",5:"E",6:"F",7:"G",8:"H",9:"I",0:"J"},S={"Goal Line":1,"Short Yardage":2,"Inside Blitz":3,Running:4,"Run & Pass":5,"Pass & Run":6,Passing:7,"Outside Blitz":8,Prevent:9,"Prevent Deep":0},k={"Pro Style":"ProStyle","Ball Control":"BallControl","Aerial Style":"AerialStyle"},B={"Run & Pass Option":"Run/Pass Option","Sideline Pass":"Side Line Pass"};function R(t){const{deckName:n,playLabel:r,defenseLabel:e,charts:s,rng:o}=t,i=k[n]||n,a=B[r]||r,c=S[e],l=c!=null?M[c]:void 0,u=s?.[i],f=u?u[a]:void 0,d=l&&f?f[l]:null;return w(d,h,o)}const q=Object.freeze(Object.defineProperty({__proto__:null,DECK_NAME_TO_CHART_KEY:k,DEF_LABEL_TO_NUM:S,DEF_NUM_TO_LETTER:M,LABEL_TO_CHART_KEY:B,determineOutcomeFromCharts:R},Symbol.toStringTag,{value:"Module"}));function J(t){let n=t%2147483647;return n<=0&&(n+=2147483646),function(){return n=n*16807%2147483647,(n-1)/2147483646}}function W(t){return Math.floor(t()*6)+1}const Q=Object.freeze(Object.defineProperty({__proto__:null,createLCG:J,rollD6:W},Symbol.toStringTag,{value:"Module"}));function D(t){const n=t.quarter===4&&t.clock<=300;let r=t.diff>0&&t.diff<=2;return t.coach.twoPointAggressiveLate&&t.diff<0&&t.diff===-1&&n&&(r=!0),r}function X(t,n){return D(t)?{aiPoints:n()<.5?2:0}:{aiPoints:n()<.98?1:0}}const Z=Object.freeze(Object.defineProperty({__proto__:null,performPAT:X,shouldGoForTwo:D},Symbol.toStringTag,{value:"Module"})),ee={"Andy Reid":{name:"Andy Reid",aggression:.9,fourthDownBoost:.15,passBias:.15,twoPointAggressiveLate:!0,onsideAggressive:!0},"John Madden":{name:"John Madden",aggression:.6,fourthDownBoost:.08,passBias:.05,twoPointAggressiveLate:!1,onsideAggressive:!1},"Bill Belichick":{name:"Bill Belichick",aggression:.35,fourthDownBoost:0,passBias:-.05,twoPointAggressiveLate:!1,onsideAggressive:!1}},te=Object.freeze(Object.defineProperty({__proto__:null,COACH_PROFILES:ee},Symbol.toStringTag,{value:"Module"}));function ne(t,n){const r={...t};return t.possession==="player"?r.ballOn=Math.max(0,Math.min(100,t.ballOn+n)):r.ballOn=Math.max(0,Math.min(100,t.ballOn-n)),r}function re(t){const n={...t,score:{...t.score}};let r=!1,e=!1;return t.possession==="player"?(t.ballOn>=100&&(n.score.player+=6,r=!0),t.ballOn<=0&&(n.score.ai+=2,e=!0)):(t.ballOn<=0&&(n.score.ai+=6,r=!0),t.ballOn>=100&&(n.score.player+=2,e=!0)),{state:n,touchdown:r,safety:e}}function oe(t){let{state:n}=t;const r=R({deckName:t.deckName,playLabel:t.playLabel,defenseLabel:t.defenseLabel,charts:t.charts,rng:t.rng});if(r.category==="penalty"&&r.penalty)return{state:n,outcome:r,touchdown:!1,safety:!1,possessionChanged:!1};let e={...n},s=!1;if(r.category==="gain"||r.category==="loss")e=ne(n,r.yards);else if(r.category!=="incomplete")if(r.category==="interception"){e.possession=n.possession==="player"?"ai":"player",s=!0;const c=r.interceptReturn||0;e.possession==="player"?e.ballOn=Math.max(0,Math.min(100,n.ballOn+c)):e.ballOn=Math.max(0,Math.min(100,n.ballOn-c)),e.down=1,e.toGo=10}else r.category==="fumble"&&(e.possession=n.possession==="player"?"ai":"player",s=!0,e.down=1,e.toGo=10);if(!s&&(r.category==="gain"||r.category==="loss")){const l=Math.abs(r.yards)>=n.toGo&&r.yards>0;l?(e.down=1,e.toGo=10):(e.down=Math.min(4,n.down+1),e.toGo=Math.max(1,l?10:n.toGo-Math.max(0,r.yards)))}else!s&&r.category==="incomplete"&&(e.down=Math.min(4,n.down+1));const o=!s&&r.category==="gain"&&r.yards>0&&r.yards>=n.toGo,i=N(r,!1,o);e.clock=Math.max(0,n.clock-i);const a=re(e);return e=a.state,{state:e,outcome:r,touchdown:a.touchdown,safety:a.safety,possessionChanged:s}}if(typeof window<"u"){const t=new(await y(async()=>{const{EventBus:o}=await import("./EventBus-u63c-i9m.js");return{EventBus:o}},[])).EventBus;try{(await y(async()=>{const{registerHUD:o}=await import("./HUD-BKXSDVD0.js");return{registerHUD:o}},[])).registerHUD(t)}catch{}try{(await y(async()=>{const{registerLog:o}=await import("./Log-CkJA5eQF.js");return{registerLog:o}},[])).registerLog(t)}catch{}try{(await y(async()=>{const{registerField:o}=await import("./Field-BNPx1jQR.js");return{registerField:o}},[])).registerField(t)}catch{}try{(await y(async()=>{const{registerHand:o}=await import("./Hand-w7N3ZjON.js");return{registerHand:o}},[])).registerHand(t)}catch{}let n=null,r=null,e=null,s=null;try{const o=await y(()=>import("./tables-DgIJKnF5.js"),[]);[n,r,e,s]=await Promise.all([o.loadOffenseCharts(),o.loadPlaceKicking(),o.loadTimeKeeping(),o.loadLongGain()])}catch{}window.GS={rules:{Kickoff:U,Punt:z,PlaceKicking:H,ResultParsing:V,Timekeeping:$,Charts:q,LongGain:await y(()=>import("./LongGain-B92lIB4o.js"),[])},ai:{PATDecision:Z,CoachProfiles:te},sim:{RNG:Q},tables:{offenseCharts:n,placeKicking:r,timeKeeping:e,longGain:s},bus:t,runtime:{resolvePlayAdapter:o=>{const i=oe({state:o.state,charts:o.charts,deckName:o.deckName,playLabel:o.playLabel,defenseLabel:o.defenseLabel,rng:o.rng}),a={...i.state,clock:o.state.clock,score:{...o.state.score},awaitingPAT:o.state.awaitingPAT,gameOver:o.state.gameOver},c=[];return i.possessionChanged&&c.push({type:"possessionChanged"}),i.touchdown&&c.push({type:"touchdown"}),i.safety&&c.push({type:"safety"}),{nextState:a,outcome:i.outcome,events:c}}}}}try{await y(()=>import("./main-bridge-DsSHK_GA.js"),[])}catch{}
