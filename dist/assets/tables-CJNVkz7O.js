import{fetchOffenseCharts as K}from"./offenseCharts-Cs8xlLcW.js";import{u as v,r as b,s as l,_ as R,o as f,a as P,n as r,b as M,g as A,f as T,e as _,c as j,l as C}from"./http-B_bVN8Ck.js";import{d as nt}from"./http-B_bVN8Ck.js";import{fetchMatchupTable as st,fetchMatchupTableByCards as ot}from"./matchupTables-C8SyztAM.js";import{fetchPenaltyTable as it,fetchPenaltyTableByName as ct}from"./penaltyTables-CtArJ56i.js";import"./validators-BtKpG0wR.js";const L=b(l(),R(["G","NG"])),y=b(l().regex(/^\d+$/),L),z=f({name:l(),dice:l(),columns:P(f({range:l(),min:r().nullable().optional(),max:r().nullable().optional()})),results:P(b(l(),v([l(),r(),M()])))}),S=v([y,z]);function B(t){const s=S.safeParse(t);if(s.success){const a=s.data;if(a&&typeof a=="object"&&!("results"in a)){const e=y.safeParse(a);if(e.success){const n=Object.keys(e.data||{});return n.length===0||!n.some(u=>typeof e.data[u]?.PAT=="string")?void 0:e.data}}try{const e=Array.isArray(a?.columns)?a.columns.map(i=>i?.range).filter(i=>typeof i=="string"):[],n=Array.isArray(a?.results)?a.results:[];if(e.length===0||n.length===0)return;const o={};for(const i of n){const m=String(i.roll);if(!/^(?:[1-9]|1[0-2])$/.test(m))continue;const g={};for(const p of e){const h=i[p];(h==="G"||h==="NG")&&(g[p]=h)}o[m]=g}const u=y.safeParse(o);if(!u.success)return;const d=Object.keys(u.data||{});return d.length===0||!(e.includes("PAT")&&d.some(i=>typeof u.data[i]?.PAT=="string"))?void 0:u.data}catch{return}}try{const a=Array.isArray(t?.columns)?t.columns.map(c=>c?.range).filter(c=>typeof c=="string"):[],e=Array.isArray(t?.results)?t.results:[];if(a.length===0||e.length===0)return;const n={};for(const c of e){const i=String(c.roll);if(!/^(?:[1-9]|1[0-2])$/.test(i))continue;const m={};for(const g of a){const p=c[g];(p==="G"||p==="NG")&&(m[g]=p)}n[i]=m}const o=y.safeParse(n);if(!o.success)return;const u=Object.keys(o.data||{});return u.length===0||!(a.includes("PAT")&&u.some(c=>typeof o.data[c]?.PAT=="string"))?void 0:o.data}catch{return}}async function w(){const t="data/place_kicking.json";return A(t,async()=>{const s=await T(t);if(!s.ok)return s;const a=B(s.data);if(!a){const e=S.safeParse(s.data);return e.success?_("TRANSFORM","failed to normalize place-kicking table"):_("SCHEMA",e.error.message)}return j(a)})}const k=f({gain0to20:r(),gain20plus:r(),loss:r(),outOfBounds:r(),incomplete:r(),interception:r(),penalty:r(),fumble:r(),kickoff:r(),fieldgoal:r(),punt:r(),extraPoint:r()}),F=f({name:l(),units:l(),rules:P(f({event:l(),duration:r().optional(),adjustment:r().optional()}))}),x=v([k,F]);function D(t){const s=x.safeParse(t);if(s.success){const a=s.data;if(a&&typeof a=="object"&&!("rules"in a)){const e=k.safeParse(a);if(e.success)return e.data}try{const e=Array.isArray(a?.rules)?a.rules:[],n=i=>e.find(m=>m?.event===i)||{},o=i=>typeof i=="number"?Math.abs(i):0;if(!["gain_in_bounds_0_to_20","gain_in_bounds_20_plus","all_plays_for_loss","out_of_bounds","incomplete_pass","interception","penalty","fumble","kickoff_fg_punt_in_bounds","extra_point"].some(i=>!!n(i).event))return;const d={gain0to20:Number(n("gain_in_bounds_0_to_20").duration)||30,gain20plus:Number(n("gain_in_bounds_20_plus").duration)||45,loss:Number(n("all_plays_for_loss").duration)||30,outOfBounds:o(n("out_of_bounds").adjustment)||15,incomplete:o(n("incomplete_pass").adjustment)||15,interception:o(n("interception").adjustment)||30,penalty:o(n("penalty").adjustment)||15,fumble:o(n("fumble").adjustment)||15,kickoff:o(n("kickoff_fg_punt_in_bounds").adjustment)||15,fieldgoal:o(n("kickoff_fg_punt_in_bounds").adjustment)||15,punt:o(n("kickoff_fg_punt_in_bounds").adjustment)||15,extraPoint:o(n("extra_point").adjustment)||0},c=k.safeParse(d);return c.success?c.data:void 0}catch{return}}try{const a=Array.isArray(t?.rules)?t.rules:[],e=d=>a.find(c=>c?.event===d)||{},n=d=>typeof d=="number"?Math.abs(d):0;if(!Array.isArray(t?.rules)||t.rules.length===0)return;const o={gain0to20:Number(e("gain_in_bounds_0_to_20").duration)||30,gain20plus:Number(e("gain_in_bounds_20_plus").duration)||45,loss:Number(e("all_plays_for_loss").duration)||30,outOfBounds:n(e("out_of_bounds").adjustment)||15,incomplete:n(e("incomplete_pass").adjustment)||15,interception:n(e("interception").adjustment)||30,penalty:n(e("penalty").adjustment)||15,fumble:n(e("fumble").adjustment)||15,kickoff:n(e("kickoff_fg_punt_in_bounds").adjustment)||15,fieldgoal:n(e("kickoff_fg_punt_in_bounds").adjustment)||15,punt:n(e("kickoff_fg_punt_in_bounds").adjustment)||15,extraPoint:n(e("extra_point").adjustment)||0},u=k.safeParse(o);return u.success?u.data:void 0}catch{return}}async function N(){const t="data/time_keeping.json";return A(t,async()=>{const s=await T(t);if(!s.ok)return s;const a=D(s.data);if(!a){const e=x.safeParse(s.data);return e.success?_("TRANSFORM","failed to normalize timekeeping table"):_("SCHEMA",e.error.message)}return j(a)})}const E=f({baseYards:r(),extra:f({die:C("1d6"),multiplier:r()}).optional()}),O=f({results:b(l().regex(/^[1-6]$/),E)});function $(t){const s=O.safeParse(t);if(s.success)return s.data.results}async function G(){const t="data/long_gain.json";return A(t,async()=>{const s=await T(t);if(!s.ok)return s;const a=$(s.data);if(!a){const e=O.safeParse(s.data);return e.success?_("TRANSFORM","failed to extract long gain results"):_("SCHEMA",e.error.message)}return j(a)})}async function Y(){const t=await K();return t.ok?t.data:void 0}async function I(){const t=await w();return t.ok?t.data:void 0}async function Q(){const t=await N();return t.ok?t.data:void 0}async function U(){const t=await G();return t.ok?t.data:void 0}async function V(){const t=await K();return t.ok?t.data:void 0}async function W(){const t=await w();return t.ok?t.data:void 0}async function X(){const t=await N();return t.ok?t.data:void 0}async function Z(){const t=await G();return t.ok?t.data:void 0}export{nt as clearTablesCache,G as fetchLongGain,st as fetchMatchupTable,ot as fetchMatchupTableByCards,K as fetchOffenseCharts,it as fetchPenaltyTable,ct as fetchPenaltyTableByName,w as fetchPlaceKicking,N as fetchTimeKeeping,U as loadLongGain,Z as loadLongGainDeprecated,Y as loadOffenseCharts,V as loadOffenseChartsDeprecated,I as loadPlaceKicking,W as loadPlaceKickingDeprecated,Q as loadTimeKeeping,X as loadTimeKeepingDeprecated};
//# sourceMappingURL=tables-CJNVkz7O.js.map
