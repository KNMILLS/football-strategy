const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tables-BYyVGAGB.js","assets/vendor-B3BKSCLF.js"])))=>i.map(i=>d[i]);
import{C as W,c as H,P as A,_ as E}from"./ai-logic-D4N6Kzv9.js";import{P as V,a as Y,K as Q,G as N}from"./game-flow-PjC-A5UU.js";import{L as Z,C as X,T as J,R as ee,b as te}from"./game-rules-D85JeWwx.js";import{E as ne}from"./ui-core-BeopM7ou.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const e of c)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(c){const e={};return c.integrity&&(e.integrity=c.integrity),c.referrerPolicy&&(e.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?e.credentials="include":c.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(c){if(c.ep)return;c.ep=!0;const e=s(c);fetch(c.href,e)}})();function z(t){const n=t.quarter===4&&t.clock<=300;let s=t.diff>0&&t.diff<=2;return t.coach.twoPointAggressiveLate&&t.diff<0&&t.diff===-1&&n&&(s=!0),s}function oe(t,n){return z(t)?{aiPoints:n()<.5?2:0}:{aiPoints:n()<.98?1:0}}const ae=Object.freeze(Object.defineProperty({__proto__:null,performPAT:oe,shouldGoForTwo:z},Symbol.toStringTag,{value:"Module"}));function re(t,n){for(const s of n)if(t<=s.max_yd)return s.p_make;return 0}function ie(t,n){const s=t.baseline;return{makeProb(l,c){let e=re(Math.round(l),s);const a=Math.abs(c.wind_mph??0),r=(c.wind_mph??0)>0?1:(c.wind_mph??0)<0?-1:0;r>0&&(e+=t.adjustments.wind_head_per_10mph*(a/10)),r<0&&(e+=t.adjustments.wind_tail_per_10mph*(a/10)),c.surface==="grass"&&(e+=0);const i=c.kicker??"avg";return i==="elite"&&(e+=t.adjustments.elite_kicker_bonus),i==="weak"&&(e+=t.adjustments.weak_kicker_malus),Math.max(0,Math.min(1,e))}}}function q(){const n=ie({baseline:[{max_yd:29,p_make:.97},{max_yd:39,p_make:.92},{max_yd:49,p_make:.82},{max_yd:55,p_make:.68},{max_yd:60,p_make:.5},{max_yd:66,p_make:.32}],adjustments:{wind_head_per_10mph:-.05,wind_tail_per_10mph:.03,altitude_high:.03,wet_surface:-.03,elite_kicker_bonus:.04,weak_kicker_malus:-.04}});function s(e){const a=e.fgModel||n,r=e.yardline_100,i=e.distance_to_go_yd,f=100-r+17,u=a.makeProb(f,{}),p=e.quarter===1||e.quarter===2&&e.time_remaining_sec>300||e.quarter===3&&e.time_remaining_sec>300,k=(e.quarter===2||e.quarter===4)&&e.time_remaining_sec<=300,P=e.time_remaining_sec<=120,v=e.score_diff<0;if(p){if(r<=40)return i<=1?"punt":i<=2&&r>=35&&u>=.75?"field_goal":"punt";if(r>=41&&r<=59)return i<=2||i<=4?"go_for_it":"punt";if(r>=60&&r<=69)return i<=2||i<=5?"go_for_it":u>=.75?"field_goal":"punt";if(r>=70)return i<=2||i<=5?"go_for_it":u>=.7||u>=.5?"field_goal":"go_for_it"}return k&&v&&(r>=50&&i<=5||r>=60&&i<=7||r>=70&&i<=10||r<40&&P&&i<=2)?"go_for_it":k&&!v?r>=80&&i<=1?"go_for_it":r>=57&&(e.down>=2||e.time_remaining_sec<=30)?u>=.55?"field_goal":"punt":u>=.62&&r>=60?"field_goal":"punt":r<=59?"punt":u>=.62?"field_goal":i<=2?"go_for_it":"punt"}function l(e){return e.quarter<4||e.time_remaining_sec>300?e.score_diff<=-9?"two":"kick":e.score_diff===-8?"two":e.score_diff===-5?"kick":e.score_diff===-4?"two":"kick"}function c(e){const a=e.score_diff<0,r=e.score_diff>=9,i=(e.quarter===2||e.quarter===4)&&e.time_remaining_sec<=300,f=e.time_remaining_sec<=120;return(i||f)&&a?{tempo:"hurry_up"}:(i||f)&&r?{tempo:"burn_clock"}:{tempo:"normal"}}return{chooseFourthDown:s,choosePAT:l,chooseTempo:c}}function se(t,n,s){return Math.max(n,Math.min(s,t))}function M(t,n,s){return(s==="player"===n?100-t:t)<20}function U(t){return t<=2?"short":t>=8?"long":"medium"}function B(t,n,s){return`${Math.max(1,Math.min(4,t))}:${n}:${s?"RZ":"FG"}`}class le{countsByKey=Object.create(null);global={run:0,pass:0};record(n,s,l){if(n!=="player"||l.possessing!=="player")return;const c=M(l.ballOnFromHome,l.playerIsHome,l.possessing),e=B(l.down,U(l.toGo),c);this.countsByKey[e]||(this.countsByKey[e]={run:0,pass:0}),this.countsByKey[e][s]+=1,this.global[s]+=1}predictRunProbabilityForPlayer(n){const s=M(n.ballOnFromHome,n.playerIsHome,"player"),l=B(n.down,U(n.toGo),s),c=this.countsByKey[l]||{run:0,pass:0},e=this.global,a=c.run+c.pass,r=e.run+e.pass,i=(c.run+1)/(a+2),f=r>0?e.run/r:.5,u=Math.max(0,Math.min(1,a/6));return se(i*u+f*(1-u),.1,.9)}}const ce=["Power Up Middle","Power Off Tackle","QB Keeper","Slant Run","End Run","Reverse","Draw","Trap","Run & Pass Option","Flair Pass","Sideline Pass","Look In Pass","Screen Pass","Pop Pass","Button Hook Pass","Razzle Dazzle","Down & Out Pass","Down & In Pass","Long Bomb","Stop & Go Pass"];function K(t,n){const s=t.replace(/\s+/g,"_"),l=n.replace(/\s+/g,"").replace(/[()&]/g,"").replace(/\/+/,"");return`${s}_${l}`}function x(t,n){return`assets/cards/${t}/${n}.jpg`}function de(t){return t.startsWith("Punt")?"punt":t.toLowerCase().includes("pass")?"pass":(["Run & Pass Option"].includes(t),"run")}function R(t){const n=ce.map(e=>({id:K(t,e),deck:t,label:e,type:de(e),art:x(t,e)})),s="Punt (4th Down Only)",l={id:K(t,s),deck:t,label:s,type:"punt",art:x(t,s)};return[...n.filter(e=>e.label!=="Trap"),l]}const L={"Pro Style":R("Pro Style"),"Ball Control":R("Ball Control"),"Aerial Style":R("Aerial Style")},F=[{id:"Defense_GoalLine",label:"Goal Line"},{id:"Defense_ShortYardage",label:"Short Yardage"},{id:"Defense_InsideBlitz",label:"Inside Blitz"},{id:"Defense_Running",label:"Running"},{id:"Defense_RunAndPass",label:"Run & Pass"},{id:"Defense_PassAndRun",label:"Pass & Run"},{id:"Defense_Passing",label:"Passing"},{id:"Defense_OutsideBlitz",label:"Outside Blitz"},{id:"Defense_Prevent",label:"Prevent"},{id:"Defense_PreventDeep",label:"Prevent Deep"}],fe={"Long Bomb":5,"Run & Pass Option":2,"Razzle Dazzle":5,"Stop & Go Pass":5};let $=!1;const o=new ne;let _={offenseCharts:null,placeKicking:null,timeKeeping:null,longGain:null},ue=null;async function me(){if(console.log("ensureUIRegistered called, uiRegistered:",$),!$){console.log("Starting UI registration..."),pe();try{const{ErrorBoundary:t}=await E(async()=>{const{ErrorBoundary:i}=await import("./ui-core-BeopM7ou.js").then(f=>f.a);return{ErrorBoundary:i}},[]),{createFallbackHUD:n,createFallbackLog:s,createFallbackField:l,createFallbackHand:c,createFallbackControls:e,createGenericFallback:a,createLoadingSpinner:r}=await E(async()=>{const{createFallbackHUD:i,createFallbackLog:f,createFallbackField:u,createFallbackHand:p,createFallbackControls:k,createGenericFallback:P,createLoadingSpinner:v}=await import("./FallbackComponents-BxQai0J3.js");return{createFallbackHUD:i,createFallbackLog:f,createFallbackField:u,createFallbackHand:p,createFallbackControls:k,createGenericFallback:P,createLoadingSpinner:v}},[]);await ye(t,n,s,l,c,e,r),await he(t,c,e,a),await _e(),$=!0,j(),o.emit("ui:ready",{})}catch(t){console.error("Failed to register UI components:",t),E(async()=>{const{createLoadingSpinner:n}=await import("./FallbackComponents-BxQai0J3.js");return{createLoadingSpinner:n}},[]).then(({createLoadingSpinner:n})=>{ge(n)}).catch(()=>{if(typeof document<"u"){const n=document.createElement("div");n.textContent="Critical error - please refresh the page",n.style.cssText="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:red;color:white;padding:20px;border-radius:8px;",document.body.appendChild(n)}})}}}function pe(){if(typeof document>"u")return;const t=document.createElement("div");t.id="initial-loading",t.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    color: white;
    font-family: Arial, sans-serif;
    flex-direction: column;
  `;const n=document.createElement("div");n.style.cssText=`
    width: 40px;
    height: 40px;
    border: 4px solid #333;
    border-top: 4px solid #007bff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 16px;
  `;const s=document.createElement("div");if(s.textContent="Loading Gridiron Strategy...",t.appendChild(n),t.appendChild(s),!document.getElementById("initial-loading-styles")){const l=document.createElement("style");l.id="initial-loading-styles",l.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(l)}document.body.appendChild(t)}function j(){if(typeof document>"u")return;const t=document.getElementById("initial-loading");t&&t.remove()}function ge(t){if(typeof document>"u")return;j();const n=t("Critical error - please refresh the page");document.body.appendChild(n)}async function ye(t,n,s,l,c,e,a){const r=[{module:"./ui/HUD",register:"registerHUD",name:"HUD",fallback:n},{module:"./ui/Log",register:"registerLog",name:"GameLog",fallback:s},{module:"./ui/Field",register:"registerField",name:"GameField",fallback:l},{module:"./ui/Controls",register:"registerControls",name:"GameControls",fallback:e},{module:"./ui/Hand",register:"registerHand",name:"PlayerHand",fallback:c}];console.log("Starting core UI component registration...");for(const i of r){console.log(`Loading ${i.name} component from ${i.module}...`);try{const f=await import(i.module);console.log(`${i.name} module loaded successfully`);const u=f[i.register];f[i.register]=p=>{try{return console.log(`Calling ${i.name} register function...`),u.call(f,p)}catch(k){console.error(`${i.name} component registration failed:`,k),p.emit("log",{message:`${i.name} component failed to initialize`});return}},console.log(`Registering ${i.name}...`),f[i.register](o),console.log(`${i.name} registered successfully`)}catch(f){if(console.error(`${i.name} module failed to load:`,f),typeof document<"u"){const u=document.createElement("div");u.style.cssText=`
          position: fixed;
          top: 10px;
          right: 10px;
          background: #ff4444;
          color: white;
          padding: 10px;
          border-radius: 4px;
          z-index: 9999;
          font-family: monospace;
          font-size: 12px;
        `,u.textContent=`${i.name} failed to load - check console`,document.body.appendChild(u)}}}}async function he(t,n,s,l){const c=[],e=a=>{"requestIdleCallback"in window?requestIdleCallback(a,{timeout:2e3}):setTimeout(a,100)};for(const a of c)e(async()=>{try{const r=await import(a.module),i=new t({componentName:a.name,fallbackComponent:(u,p)=>a.fallback(),onError:(u,p)=>{console.error(`${a.name} component error:`,u),o.emit("log",{message:`${a.name} component failed - using fallback display`})}}),f=r[a.register];r[a.register]=u=>{try{return f.call(r,u)}catch(p){i.handleError(p);return}},r[a.register](o)}catch(r){console.warn(`${a.name} module failed to load:`,r);const i=a.fallback();if(typeof document<"u"){const f=document.getElementById(a.name.toLowerCase())||document.createElement("div");f.id=a.name.toLowerCase(),f.appendChild(i),document.body.appendChild(f)}}})}async function _e(){["./ui/DevMode","./ui/SpecialTeamsUI","./ui/PenaltyUI","./ui/VFX","./ui/SFX","./qa/Harness"].forEach(async n=>{try{const s=await import(n),l=n.split("/").pop()?.replace(/([A-Z])/g,"_$1").toLowerCase().slice(1)||"";if(s[`register${l.charAt(0).toUpperCase()+l.slice(1)}`]){const c=s[`register${l.charAt(0).toUpperCase()+l.slice(1)}`];c(o)}}catch(s){console.warn(`${n} component failed to load:`,s)}})}async function be(){try{const{ProgressiveEnhancement:t}=await E(async()=>{const{ProgressiveEnhancement:n}=await import("./ProgressiveEnhancement-xFxCujYg.js");return{ProgressiveEnhancement:n}},[]);ue=new t(o,{enableWebGL:!0,enableWebAudio:!0,enableOfflineSupport:!0,enableAdvancedAnimations:!0,enablePerformanceMonitoring:!0}),o.on("features:detected",({features:n})=>{console.log("Browser features detected:",n),n.webgl&&o.emit("log",{message:"Enhanced graphics enabled"}),n.webAudio&&o.emit("log",{message:"Enhanced audio enabled"}),n.serviceWorker&&o.emit("log",{message:"Offline support available"})}),o.on("performance:loadTime",({loadTime:n})=>{console.log(`UI loaded in ${Math.round(n)}ms`),o.emit("log",{message:`UI loaded in ${Math.round(n)}ms`})}),o.on("performance:fps",({fps:n})=>{n<30&&(console.warn(`Low frame rate detected: ${n}fps`),o.emit("log",{message:`Performance: ${n}fps`}))})}catch(t){console.warn("Progressive enhancement failed to initialize:",t)}}async function ke(){try{const t=await E(()=>import("./tables-BYyVGAGB.js"),__vite__mapDeps([0,1])),[n,s,l,c]=await Promise.all([t.fetchOffenseCharts(),t.fetchPlaceKicking(),t.fetchTimeKeeping(),t.fetchLongGain()]);_={offenseCharts:n.ok?n.data:null,placeKicking:s.ok?s.data:null,timeKeeping:l.ok?l.data:null,longGain:c.ok?c.data:null};const e=`Loaded offense charts ${n.ok?"✓":`✕ (${n.error.code})`}, place-kicking ${s.ok?"✓":`✕ (${s.error.code})`}, timekeeping ${l.ok?"✓":`✕ (${l.error.code})`}, long-gain ${c.ok?"✓":`✕ (${c.error.code})`}`;o.emit("log",{message:e})}catch{_={offenseCharts:null,placeKicking:null,timeKeeping:null,longGain:null}}typeof window<"u"&&window.GS&&(window.GS.tables=_)}function I(t){typeof document>"u"||(document.body.dataset.theme=t)}o.on("ui:themeChanged",({theme:t})=>{try{I(t)}catch{}});async function we(t){if(!(typeof window>"u")){await be(),await me(),t&&t.theme&&I(t.theme),await ke(),o.emit("hudUpdate",{quarter:1,clock:900,down:1,toGo:10,ballOn:25,possession:"player",score:{player:0,ai:0}});try{o.on("ui:newGame",async({deckName:n,opponentName:s})=>{try{if(!_.offenseCharts){o.emit("log",{message:"Data tables not loaded yet."});return}const l=Math.floor(Math.random()*1e9),c=H(l),e=new N({charts:_.offenseCharts,rng:c,timeKeeping:_.timeKeeping||{gain0to20:30,gain20plus:45,loss:30,outOfBounds:15,incomplete:15,interception:30,penalty:15,fumble:15,kickoff:15,fieldgoal:15,punt:15,extraPoint:0},policy:{chooseTempo:({quarter:m,clock:d,diff:g,side:h})=>{try{return q().chooseTempo({quarter:m,time_remaining_sec:d,half:m<=2?1:2,score_diff:g,down:1,distance_to_go_yd:10,yardline_100:25,has_two_minute_warning:(m===2||m===4)&&d>120,team_archetype:"Pro",home_or_road:h==="player"?"home":"road",underdog:!1,possession_after_score_pref:"normal"}).tempo}catch{return"normal"}}}}),r=(m=>m==="Pro Style"||m==="Ball Control"||m==="Aerial Style"?m:"Pro Style")(n);let i="Pro Style";s==="Andy Reid"?i="Aerial Style":s==="Bill Belichick"?i="Ball Control":s==="John Madden"&&(i="Pro Style");const f={seed:l,quarter:1,clock:900,down:1,toGo:10,ballOn:25,possession:"ai",awaitingPAT:!1,gameOver:!1,score:{player:0,ai:0}},u=e.performKickoff(f,"normal","ai"),p=u.state;if(o.emit("log",{message:`New game started — You: ${r} vs ${String(s||"AI")} (seed=${l})`}),o.emit("hudUpdate",{quarter:p.quarter,clock:p.clock,down:p.down,toGo:p.toGo,ballOn:p.ballOn,possession:p.possession,score:p.score}),p.possession==="player"){const d=(L[r]||[]).map(g=>({id:g.id,label:g.label,art:g.art,type:g.type}));o.emit("handUpdate",{cards:d,isPlayerOffense:!0})}else{const m=F.map(d=>({id:d.id,label:d.label,art:`assets/cards/Defense/${d.label}.jpg`,type:"defense"}));o.emit("handUpdate",{cards:m,isPlayerOffense:!1})}window.GS_RUNTIME={flow:e,playerDeck:r,aiDeck:i,state:p,seed:l};const k=new le,P=m=>{for(const d of m)d.type==="hud"?o.emit("hudUpdate",d.payload):d.type==="log"?o.emit("log",{message:d.message}):d.type==="vfx"?o.emit("vfx",{type:d.payload.kind,payload:d.payload.data}):d.type==="final"?o.emit("log",{message:`Final — HOME ${d.payload.score.player} — AWAY ${d.payload.score.ai}`}):d.type==="halftime"?o.emit("log",{message:"Halftime"}):d.type==="endOfQuarter"?o.emit("log",{message:`End of Q${d.payload.quarter}`}):d.type==="score"&&o.emit("log",{message:`Score: ${d.payload.kind}`})};try{P(u.events)}catch{}const v={charts:_.offenseCharts,getOffenseHand:()=>(L[r]||[]).map(d=>({id:d.id,label:d.label,type:d.type})),getDefenseOptions:()=>F.map(m=>m.label),getWhiteSignRestriction:m=>fe[m]??null},C=new A(v,!0),w=new A(v,!0);try{await C.loadPersonality(),await w.loadPersonality()}catch{}C.reset(l),w.reset(l+1),o.on("hudUpdate",({possession:m})=>{try{const d=window.GS_RUNTIME||{};if(m==="player"){const h=(L[d.playerDeck]||[]).map(y=>({id:y.id,label:y.label,art:y.art,type:y.type}));o.emit("handUpdate",{cards:h,isPlayerOffense:!0})}else{const g=F.map(h=>({id:h.id,label:h.label,art:`assets/cards/Defense/${h.label}.jpg`,type:"defense"}));o.emit("handUpdate",{cards:g,isPlayerOffense:!1})}}catch{}}),o.on("ui:playCard",({cardId:m})=>{try{const d=window.GS_RUNTIME||{},g=d.state;if(!g||g.gameOver)return;if(g.possession==="player"){const y=(L[d.playerDeck]||[]).find(T=>T.id===m);if(!y)return;const D=w.choose_defense_play(g),O={deckName:d.playerDeck,playLabel:y.label,defenseLabel:D.label},b={...g},S=e.resolveSnap(g,O);P(S.events),window.GS_RUNTIME.state=S.state;try{C.add_observation(b,y.label,D.label),w.add_observation(b,y.label,D.label),C.stepDecay(),w.stepDecay()}catch{}try{const T=/pass/i.test(y.label)?"pass":"run";k.record("player",T,{down:b.down,toGo:b.toGo,ballOnFromHome:b.ballOn,playerIsHome:!0,possessing:b.possession})}catch{}}else{const h=F.find(S=>S.id===m);if(!h)return;const y=w.choose_offense_play(g,d.aiDeck),D={deckName:d.aiDeck,playLabel:y.playLabel,defenseLabel:h.label},O={...g},b=e.resolveSnap(g,D);P(b.events),window.GS_RUNTIME.state=b.state;try{C.add_observation(O,y.playLabel,h.label),w.add_observation(O,y.playLabel,h.label),C.stepDecay(),w.stepDecay()}catch{}}}catch(d){try{o.emit("log",{message:`Play selection failed: ${String(d?.message||d)}`})}catch{}}})}catch(l){o.emit("log",{message:`Failed to start new game: ${l?.message||l}`})}})}catch{}}}function Pe(){}const G={bus:o,rules:{Kickoff:Q,Punt:Y,PlaceKicking:V,ResultParsing:ee,Timekeeping:J,Charts:X,LongGain:Z},ai:{PATDecision:ae,CoachProfiles:W},tables:_,start:we,dispose:Pe,setTheme:I,runtime:{resolvePlayAdapter:t=>{const n=te({state:t.state,charts:t.charts,deckName:t.deckName,playLabel:t.playLabel,defenseLabel:t.defenseLabel,rng:t.rng}),s={...n.state,clock:t.state.clock,score:{...t.state.score},awaitingPAT:t.state.awaitingPAT,gameOver:t.state.gameOver},l=[];return n.possessionChanged&&l.push({type:"possessionChanged"}),n.touchdown&&l.push({type:"touchdown"}),n.safety&&l.push({type:"safety"}),{nextState:s,outcome:n.outcome,events:l}},createFlow:t=>{const n=H(t??12345);if(!_.offenseCharts)throw new Error("Offense charts not loaded");const s=new N({charts:_.offenseCharts,rng:n,timeKeeping:_.timeKeeping||{gain0to20:30,gain20plus:45,loss:30,outOfBounds:15,incomplete:15,interception:30,penalty:15,fumble:15,kickoff:15,fieldgoal:15,punt:15,extraPoint:0},policy:{chooseTempo:({quarter:e,clock:a,diff:r,side:i})=>{try{return q().chooseTempo({quarter:e,time_remaining_sec:a,half:e<=2?1:2,score_diff:r,down:1,distance_to_go_yd:10,yardline_100:25,has_two_minute_warning:(e===2||e===4)&&a>120,team_archetype:"Pro",home_or_road:i==="player"?"home":"road",underdog:!1,possession_after_score_pref:"normal"}).tempo}catch{return"normal"}}}});let l=null;const c=e=>{for(const a of e)if(a.type==="hud")o.emit("hudUpdate",a.payload);else if(a.type==="log")o.emit("log",{message:a.message}),/Field goal missed/i.test(a.message)&&(o.emit&&o.emit("vfx:banner",{text:"NO GOOD"}),o.emit&&o.emit("sfx:crowd",{kind:"groan"}));else if(a.type==="vfx"){const r=a.payload.kind;r==="td"?(o.emit&&o.emit("vfx:banner",{text:"TOUCHDOWN!",gold:!0}),o.emit&&o.emit("vfx:flash",{}),o.emit&&o.emit("sfx:crowd",{kind:"cheer"})):r==="interception"?(o.emit&&o.emit("vfx:banner",{text:"INTERCEPTION!"}),o.emit&&o.emit("vfx:shake",{selector:"body"}),o.emit&&o.emit("sfx:hit",{})):r==="twoMinute"&&o.emit&&o.emit("vfx:flash",{}),o.emit("vfx",{type:r,payload:a.payload.data})}else if(a.type==="choice-required"){if(o.emit("flow:choiceRequired",{choice:a.choice,data:a.data}),a.choice==="penaltyAcceptDecline"){const r=a.data||{};l={accepted:r.accepted,declined:r.declined,meta:r.meta}}}else a.type==="final"?o.emit("log",{message:`Final — HOME ${a.payload.score.player} — AWAY ${a.payload.score.ai}`}):a.type==="halftime"?o.emit("log",{message:"Halftime"}):a.type==="endOfQuarter"?o.emit("log",{message:`End of Q${a.payload.quarter}`}):a.type==="score"&&(o.emit("log",{message:`Score: ${a.payload.kind}`}),o.emit&&o.emit("vfx:scorePop",{}),a.payload.kind==="FG"?(o.emit&&o.emit("vfx:banner",{text:"FIELD GOAL!"}),o.emit&&o.emit("sfx:beep",{freq:880,type:"triangle"})):a.payload.kind==="Safety"?(o.emit&&o.emit("vfx:banner",{text:"SAFETY!",gold:!0}),o.emit&&o.emit("sfx:beep",{freq:220,type:"square"})):a.payload.kind==="TD"&&(o.emit&&o.emit("vfx:banner",{text:"TOUCHDOWN!",gold:!0}),o.emit&&o.emit("sfx:crowd",{kind:"cheer"})))};return o.on&&o.on("ui:choice.penalty",e=>{if(!l)return;const a=l,r=e.decision==="accept"?a.accepted:a.declined,i=s.finalizePenaltyDecision(r,e.decision,a.meta);i.state,c(i.events),l=null}),{resolveSnap:(e,a)=>{const r=s.resolveSnap(e,a);return c(r.events),r.state,r},applyPenaltyDecision:(e,a,r)=>{const i=a==="accept"?r.accepted:r.declined,f=s.finalizePenaltyDecision(i,a,r.meta);return c(f.events),f.state,f},resolvePATAndRestart:(e,a)=>{const r=s.resolvePATAndRestart(e,a);return c(r.events),r.state,r},attemptFieldGoal:(e,a,r)=>{const i=s.attemptFieldGoal(e,a,r);return c(i.events),i.state,i},resolveSafetyRestart:(e,a)=>{const r=s.resolveSafetyRestart(e,a);return c(r.events),r.state,r},performKickoff:(e,a,r)=>{const i=s.performKickoff(e,a,r);return c(i.events),i.state,i},inner:s}}}};typeof window<"u"&&!window.GS&&(window.GS=G);if(typeof document<"u")if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{try{G.start()}catch{}},{once:!0});else try{G.start()}catch{}
//# sourceMappingURL=index-eOZWbFL9.js.map
